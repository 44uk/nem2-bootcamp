# マルチシグアカウント

マルチシグアカウントとは、マルチシグアカウントからのトランザクションに関して、複数の連署者というトランザクションの発行に承認能力を持つアカウントを追加する機能です。

- [マルチシグアカウント — NEM Developer Center](https://nemtech.github.io/ja/concepts/multisig-account.html#multisig-account)


## マルチシグアカウントの用途

マルチシグアカウントとなったアカウントはそれ自信からトランザクションを発行することができなくなり、トランザクション発信は連署者より行うことになります。

マルチシグアカウントの連署者は後から追加・削減することができます。

- 共有アカウントからのモザイク送信の承認・否認ロジック
- アカウントの譲渡

アカウントの譲渡とは、連署者を付け替えることでマルチシグアカウントの所有者を移し替えるテクニックです。


## マルチシグアカウントへの変換

`scripts/multisig/convert_account_into_multisig.js`を実行してください。

このスクリプトはアカウントを3つ生成し、そのうち1つをマルチシグアカウントに、

2つと環境変数に設定している秘密鍵のアカウントの3つのアカウントを連署者として設定します。

ここで設定されたマルチシグアカウントは後で利用するので、

ターミナルの出力を保存したり、`tee`コマンドなどを利用して生成されたアカウントをメモしておいてください。

マルチシグアカウントの連署者に指定されたアカウントはその要求に署名する必要があります。

このスクリプトでは便宜上アカウントを生成していて秘密鍵がわかっているため、アグリゲートコンプリートで処理します。


```shell
$ node scripts/multisig/convert_account_into_multisig.js | tee multisig.txt
Initiater: SCGUWZ-FCZDKI-QCACJH-KSMRT7-R75VY6-FQGJOU-EZN5
Endpoint:  http://localhost:3000/account/SCGUWZFCZDKIQCACJHKSMRT7R75VY6FQGJOUEZN5

Multisig Account
Private:  C49E95DCFF32F43A72CE1E7ABE4A1CAA48CE87573889A54161F0C6069F169CA2
Public:   F5B9256485A4BDD4ACD713D8A95BAB38E83B22934E8B8C6A74285B060413FAD6
Address:  SDGQ6R-TCBE7S-3LTTXG-7YVMAB-XHJTZD-CF3JWE-5R7A
Endpoint: http://localhost:3000/account/SDGQ6RTCBE7S3LTTXG7YVMABXHJTZDCF3JWE5R7A
Endpoint: http://localhost:3000/account/SDGQ6RTCBE7S3LTTXG7YVMABXHJTZDCF3JWE5R7A/multisig

Cosigner Account1:
Private:  63C3B2AD116A94591483F60E320BB5A53795F8FCB88AB282BADDC86A0BE69F99
Public:   7CDFDE511E145E4B17292AC268B2AD493B30C3AB060EBC53F753661C4BC06AC8
Address:  SBV46L-BDJZGK-ETWYS5-6ZT2VV-4RCOMH-KA3NTN-UQSG
Endpoint: http://localhost:3000/account/SBV46LBDJZGKETWYS56ZT2VV4RCOMHKA3NTNUQSG
Endpoint: http://localhost:3000/account/SBV46LBDJZGKETWYS56ZT2VV4RCOMHKA3NTNUQSG/multisig

Cosigner Account2:
Private:  3BC214EF814EB288BD04534354CA3BBF37C74E36EAD562142F48BC8CBAD7A927
Public:   043F016A2DE43A1D263EC0953A6157CDDD4F53DEC0A0DE33CB5937AEC9B8CE0A
Address:  SBFMZE-43WQ25-5UPU7O-HRAGZ6-S3SFGE-K7NZ4A-KCBM
Endpoint: http://localhost:3000/account/SBFMZE43WQ255UPU7OHRAGZ6S3SFGEK7NZ4AKCBM
Endpoint: http://localhost:3000/account/SBFMZE43WQ255UPU7OHRAGZ6S3SFGEK7NZ4AKCBM/multisig

Cosigner Account3:
Private:  25E7E5A21DD0C863B3CC3767C5CC6C081A7C7795BA4115231C74F491A97D6ED7
Public:   64DFE4120D0F960C6602B9386542768556D2CD5242975F37837C8C5F238C78C0
Address:  SCGUWZ-FCZDKI-QCACJH-KSMRT7-R75VY6-FQGJOU-EZN5
Endpoint: http://localhost:3000/account/SCGUWZFCZDKIQCACJHKSMRT7R75VY6FQGJOUEZN5
Endpoint: http://localhost:3000/account/SCGUWZFCZDKIQCACJHKSMRT7R75VY6FQGJOUEZN5/multisig

connection open
[Transaction announced]
Endpoint: http://localhost:3000/transaction/791096425690151D27D88A10FCC4413F9295E39E94C7406CA6A75A1DC58E37E7
Hash:     791096425690151D27D88A10FCC4413F9295E39E94C7406CA6A75A1DC58E37E7
Signer:   F5B9256485A4BDD4ACD713D8A95BAB38E83B22934E8B8C6A74285B060413FAD6

[UNCONFIRMED] SDGQ6R...
{"type":16725,"networkType":144,"version":3,"deadline":{"value":"2019-03-24T00:03:11.471"},"fee":{"lower":0,"higher":0},"signature":"3389D48B2FA6D07B6BBC51C9B03E6784BBFC4B27E70475D62D83AB890820ADE1473124DE42873562A36FC80E7F6EFEB8672FA1B6C4E92024729F8A6C1AE9EB0F","signer":{"publicKey":"F5B9256485A4BDD4ACD713D8A95BAB38E83B22934E8B8C6A74285B060413FAD6","address":{"address":"SDGQ6RTCBE7S3LTTXG7YVMABXHJTZDCF3JWE5R7A","networkType":144}},"transactionInfo":{"height":{"lower":0,"higher":0},"hash":"791096425690151D27D88A10FCC4413F9295E39E94C7406CA6A75A1DC58E37E7","merkleComponentHash":"791096425690151D27D88A10FCC4413F9295E39E94C7406CA6A75A1DC58E37E7"},"minApprovalDelta":2,"minRemovalDelta":2,"modifications":[{"type":0,"cosignatoryPublicAccount":{"publicKey":"7CDFDE511E145E4B17292AC268B2AD493B30C3AB060EBC53F753661C4BC06AC8","address":{"address":"SBV46LBDJZGKETWYS56ZT2VV4RCOMHKA3NTNUQSG","networkType":144}}},{"type":0,"cosignatoryPublicAccount":{"publicKey":"043F016A2DE43A1D263EC0953A6157CDDD4F53DEC0A0DE33CB5937AEC9B8CE0A","address":{"address":"SBFMZE43WQ255UPU7OHRAGZ6S3SFGEK7NZ4AKCBM","networkType":144}}},{"type":0,"cosignatoryPublicAccount":{"publicKey":"64DFE4120D0F960C6602B9386542768556D2CD5242975F37837C8C5F238C78C0","address":{"address":"SCGUWZFCZDKIQCACJHKSMRT7R75VY6FQGJOUEZN5","networkType":144}}}]}

[CONFIRMED] SDGQ6R...
{"type":16725,"networkType":144,"version":3,"deadline":{"value":"2019-03-24T00:03:11.471"},"fee":{"lower":0,"higher":0},"signature":"3389D48B2FA6D07B6BBC51C9B03E6784BBFC4B27E70475D62D83AB890820ADE1473124DE42873562A36FC80E7F6EFEB8672FA1B6C4E92024729F8A6C1AE9EB0F","signer":{"publicKey":"F5B9256485A4BDD4ACD713D8A95BAB38E83B22934E8B8C6A74285B060413FAD6","address":{"address":"SDGQ6RTCBE7S3LTTXG7YVMABXHJTZDCF3JWE5R7A","networkType":144}},"transactionInfo":{"height":{"lower":5801,"higher":0},"hash":"791096425690151D27D88A10FCC4413F9295E39E94C7406CA6A75A1DC58E37E7","merkleComponentHash":"791096425690151D27D88A10FCC4413F9295E39E94C7406CA6A75A1DC58E37E7"},"minApprovalDelta":2,"minRemovalDelta":2,"modifications":[{"type":0,"cosignatoryPublicAccount":{"publicKey":"7CDFDE511E145E4B17292AC268B2AD493B30C3AB060EBC53F753661C4BC06AC8","address":{"address":"SBV46LBDJZGKETWYS56ZT2VV4RCOMHKA3NTNUQSG","networkType":144}}},{"type":0,"cosignatoryPublicAccount":{"publicKey":"043F016A2DE43A1D263EC0953A6157CDDD4F53DEC0A0DE33CB5937AEC9B8CE0A","address":{"address":"SBFMZE43WQ255UPU7OHRAGZ6S3SFGEK7NZ4AKCBM","networkType":144}}},{"type":0,"cosignatoryPublicAccount":{"publicKey":"64DFE4120D0F960C6602B9386542768556D2CD5242975F37837C8C5F238C78C0","address":{"address":"SCGUWZFCZDKIQCACJHKSMRT7R75VY6FQGJOUEZN5","networkType":144}}}]}
```

トランザクションが承認されたら`Multisig Account`のURLにアクセスしてみましょう。

```json
{
    multisig: {
        account: "F5B9256485A4BDD4ACD713D8A95BAB38E83B22934E8B8C6A74285B060413FAD6",
        accountAddress: "90CD0F4662093F2DAE73B9BF8AB001B9D33C8C45DA6C4EC7E0",
        minApproval: 2,
        minRemoval: 2,
        cosignatories: [
            "043F016A2DE43A1D263EC0953A6157CDDD4F53DEC0A0DE33CB5937AEC9B8CE0A",
            "64DFE4120D0F960C6602B9386542768556D2CD5242975F37837C8C5F238C78C0",
            "7CDFDE511E145E4B17292AC268B2AD493B30C3AB060EBC53F753661C4BC06AC8"
        ],
        multisigAccounts: [ ]
    }
}
```

`cosignatories`の配列に連署者の公開鍵が羅列されていることを確認してみてください。


### コード解説

複数のアカウントを`nem2-cli`で準備するのは時間がかかるので、便宜上コード中でアカウントを生成しています。

アカウントを3つ作って、1つ目をマルチシグアカウントへ、後の2つと`alice`を連署者として設定します。

生成したアカウントの秘密鍵はコンソールに表示しているだけなので、適宜リダイレクトや`tee`コマンドでテキストに保存してください。

なお、現実のコードにおいては、連署者として追加するための公開鍵が必要です。

さらに、アグリゲートボンドトランザクションによって連署者となるための署名が必要になります。


```javascript
// 連署者とするアカウントの公開アカウントの集合を作る
const cosignerPublicAccounts = cosigners.map((account, idx) => {
  showAccountInfo(account, `Cosigner Account${idx+1}:`)
  return account.publicAccount
})

// 連署者の追加定義集合を作る
const cosignatoryModifications = cosignerPublicAccounts.map(publicAccount => {
  return new nem.MultisigCosignatoryModification(
    nem.MultisigCosignatoryModificationType.Add,
    publicAccount
  );
});

const convertIntoMultisigTx = nem.ModifyMultisigAccountTransaction.create(
  nem.Deadline.create(),
  minApprovalDelta,
  minRemovalDelta,
  cosignatoryModifications,
  nem.NetworkType.MIJIN_TEST
);

// 実際はAggregateTransaction.createBondedメソッドを使い連署アカウントに署名を求める。
// 今回は連署アカウントの秘密鍵がわかっているのでそれらを利用して署名してしまう。
const aggregateTx = nem.AggregateTransaction.createComplete(
  nem.Deadline.create(),
  [ convertIntoMultisigTx.toAggregate(toBeMultisig.publicAccount) ],
  nem.NetworkType.MIJIN_TEST
);

util.listener(url, toBeMultisig.address, {
  onOpen: () => {
    // signTransactionWithCosignatoriesを使う
    const signedTx = toBeMultisig.signTransactionWithCosignatories(
      aggregateTx,
      cosigners,
      process.env.GENERATION_HASH
    );
    util.announce(url, signedTx);
  },
  onConfirmed: (_, listener) => listener.close()
});
```

各公開鍵とそれを追加・削除を表す値(今回は追加)で`MultisigCosignatoryModification`オブジェクトを作成します。

その集合を使って`ModifyMultisigAccountTransaction`オブジェクトを作成し、署名して発信します。

`minApprovalDelta`はトランザクションを承認するために必要な最小承認数です。

`minRemovalDelta`は連署者を削除するために必要な最小承認数です。

それぞれ増加・減少数を指定する必要があります。

今回は初回の設定なので、設定したい目標数をそのまま指定します。

署名済みトランザクションを**マルチシグアカウントに変換したいアカウントの秘密鍵**で作ります。

次に、このトランザクションをアグリゲートトランザクションでラップします。

現実には連署者の秘密鍵がわかることは無いでしょうから、通常は`AggregateTransaction.createBonded`で連署者に署名を求める必要があります。

`createdBonded`を用いたサンプルは`convert_account_into_multisig.bonded.js`として用意してあるので、コードの違いを確認してみてください。

こちらのコードも便宜上同じコードの中で各連署アカウントが署名をしていますが、実際にはそれぞれのアカウントが署名をするはずなので、処理の流れの参考にしてみてください。

このコードは引数にマルチシグアカウントに変換するアカウントの秘密鍵を渡します。

アカウントがアグリゲートボンドトランザクションを発信する必要があるため、`10 cat.currency`以上を保有させておく必要があります。

`node scripts/multisig/convert_account_into_multisig.bonded.js __TO_BE_MULTIGIS_PRIVATE_KEY__`として実行してみてください。


## マルチシグアカウントからの送信

マルチシグ化したアカウントはそのアカウントの秘密鍵ではトランザクションを発信することができなくなります。

マルチシグアカウントからトランザクションを発信する場合は連署アカウントからアグリゲートトランザクションを発信します。

転送して残高に反映されたら`scripts/multisig/initiate_from_cosigner.js`を実行してください。

このスクリプトは連署者の秘密鍵、マルチシグアカウントの公開鍵、受信者アドレスを渡します。

ここでは前の項で作った、連署者として`Cosigner Account1`の秘密鍵を、マルチシグアカウントの公開鍵を、受信者には`Cosigner Account2`のアドレスを指定しました。

```shell
$ node scripts/multisig/initiate_from_cosigner.js 63C3B2AD116A94591483F60E320BB5A53795F8FCB88AB282BADDC86A0BE69F99 F5B9256485A4BDD4ACD713D8A95BAB38E83B22934E8B8C6A74285B060413FAD6 SBFMZE43WQ255UPU7OHRAGZ6S3SFGEK7NZ4AKCBM
Initiater:  SCGUWZ-FCZDKI-QCACJH-KSMRT7-R75VY6-FQGJOU-EZN5
Endpoint:   http://localhost:3000/account/SCGUWZFCZDKIQCACJHKSMRT7R75VY6FQGJOUEZN5
Cosignator: SBV46L-BDJZGK-ETWYS5-6ZT2VV-4RCOMH-KA3NTN-UQSG
Endpoint:   http://localhost:3000/account/SBV46LBDJZGKETWYS56ZT2VV4RCOMHKA3NTNUQSG
Multisig:   SDGQ6R-TCBE7S-3LTTXG-7YVMAB-XHJTZD-CF3JWE-5R7A
Endpoint:   http://localhost:3000/account/SDGQ6RTCBE7S3LTTXG7YVMABXHJTZDCF3JWE5R7A
Amount:     1
Recipient:  SBFMZE-43WQ25-5UPU7O-HRAGZ6-S3SFGE-K7NZ4A-KCBM
Endpoint:   http://localhost:3000/account/SBFMZE43WQ255UPU7OHRAGZ6S3SFGEK7NZ4AKCBM

connection open
[Transaction announced]
Endpoint: http://localhost:3000/transaction/C3DE086FDBD6C8A1E10C09D3D8F635A6B1DA778C27843CA5FAC47DEB419E71BB
Hash:     C3DE086FDBD6C8A1E10C09D3D8F635A6B1DA778C27843CA5FAC47DEB419E71BB
Signer:   64DFE4120D0F960C6602B9386542768556D2CD5242975F37837C8C5F238C78C0

[UNCONFIRMED] SCGUWZ...
{"type":16712,"networkType":144,"version":1,"deadline":{"value":"2019-03-25T00:22:43.013"},"fee":{"lower":0,"higher":0},"signature":"574F80482FE348003E86CB0497596B6E1E3635F2B846D95CCA983E2161D709B76ABCBFF3EF7768B1671741D37354699A853715B4888BB5E907B926F5439F2A05","signer":{"publicKey":"64DFE4120D0F960C6602B9386542768556D2CD5242975F37837C8C5F238C78C0","address":{"address":"SCGUWZFCZDKIQCACJHKSMRT7R75VY6FQGJOUEZN5","networkType":144}},"transactionInfo":{"height":{"lower":0,"higher":0},"hash":"C3DE086FDBD6C8A1E10C09D3D8F635A6B1DA778C27843CA5FAC47DEB419E71BB","merkleComponentHash":"C3DE086FDBD6C8A1E10C09D3D8F635A6B1DA778C27843CA5FAC47DEB419E71BB"},"mosaic":{"id":{"id":{"lower":1812672056,"higher":2097790768}},"amount":{"lower":10000000,"higher":0}},"duration":{"lower":480,"higher":0},"hash":"EBDCD709A41BF5100E20A63EA73A536C3704C9B74C9F6D2248509BD7783A829D"}

[CONFIRMED] SCGUWZ...
{"type":16712,"networkType":144,"version":1,"deadline":{"value":"2019-03-25T00:22:43.013"},"fee":{"lower":0,"higher":0},"signature":"574F80482FE348003E86CB0497596B6E1E3635F2B846D95CCA983E2161D709B76ABCBFF3EF7768B1671741D37354699A853715B4888BB5E907B926F5439F2A05","signer":{"publicKey":"64DFE4120D0F960C6602B9386542768556D2CD5242975F37837C8C5F238C78C0","address":{"address":"SCGUWZFCZDKIQCACJHKSMRT7R75VY6FQGJOUEZN5","networkType":144}},"transactionInfo":{"height":{"lower":8711,"higher":0},"hash":"C3DE086FDBD6C8A1E10C09D3D8F635A6B1DA778C27843CA5FAC47DEB419E71BB","merkleComponentHash":"C3DE086FDBD6C8A1E10C09D3D8F635A6B1DA778C27843CA5FAC47DEB419E71BB"},"mosaic":{"id":{"id":{"lower":1812672056,"higher":2097790768}},"amount":{"lower":10000000,"higher":0}},"duration":{"lower":480,"higher":0},"hash":"EBDCD709A41BF5100E20A63EA73A536C3704C9B74C9F6D2248509BD7783A829D"}

[AGGREGATE_BONDED_ADDED] SCGUWZ...
{"type":16961,"networkType":144,"version":2,"deadline":{"value":"2019-03-25T00:22:41.288"},"fee":{"lower":0,"higher":0},"signature":"6B7EFA559701E4C63367C80F5447DFD2978D5838055EF44C2BD3EAB31AE5EEEEFF23FF494FA2464FDA614F8A312F225DB59EC10422F24DA61D225AB91FA5EB08","signer":{"publicKey":"64DFE4120D0F960C6602B9386542768556D2CD5242975F37837C8C5F238C78C0","address":{"address":"SCGUWZFCZDKIQCACJHKSMRT7R75VY6FQGJOUEZN5","networkType":144}},"transactionInfo":{"height":{"lower":0,"higher":0},"hash":"EBDCD709A41BF5100E20A63EA73A536C3704C9B74C9F6D2248509BD7783A829D","merkleComponentHash":"0000000000000000000000000000000000000000000000000000000000000000"},"innerTransactions":[{"type":16724,"networkType":144,"version":3,"deadline":{"value":"2019-03-25T00:22:41.288"},"fee":{"lower":0,"higher":0},"signature":"6B7EFA559701E4C63367C80F5447DFD2978D5838055EF44C2BD3EAB31AE5EEEEFF23FF494FA2464FDA614F8A312F225DB59EC10422F24DA61D225AB91FA5EB08","signer":{"publicKey":"F5B9256485A4BDD4ACD713D8A95BAB38E83B22934E8B8C6A74285B060413FAD6","address":{"address":"SDGQ6RTCBE7S3LTTXG7YVMABXHJTZDCF3JWE5R7A","networkType":144}},"recipient":{"address":"SBFMZE43WQ255UPU7OHRAGZ6S3SFGEK7NZ4AKCBM","networkType":144},"mosaics":[{"id":{"id":{"lower":3294802500,"higher":2243684972}},"amount":{"lower":1000000,"higher":0}}],"message":{"type":0,"payload":""}}],"cosignatures":[]}

[COSIGNATURE_ADDED] SCGUWZ...
{"parentHash":"EBDCD709A41BF5100E20A63EA73A536C3704C9B74C9F6D2248509BD7783A829D","signature":"311534CF2BC6B1C24E3A6B999C38DE3291B726210E19796D6B5F580E5A23AA99E5978913D727B070EB7709081EDC4B9BF36A86D53AA300956BB343716316D20E","signer":"7CDFDE511E145E4B17292AC268B2AD493B30C3AB060EBC53F753661C4BC06AC8"}

[UNCONFIRMED] SCGUWZ...
{"type":16961,"networkType":144,"version":2,"deadline":{"value":"2019-03-25T00:22:41.288"},"fee":{"lower":0,"higher":0},"signature":"6B7EFA559701E4C63367C80F5447DFD2978D5838055EF44C2BD3EAB31AE5EEEEFF23FF494FA2464FDA614F8A312F225DB59EC10422F24DA61D225AB91FA5EB08","signer":{"publicKey":"64DFE4120D0F960C6602B9386542768556D2CD5242975F37837C8C5F238C78C0","address":{"address":"SCGUWZFCZDKIQCACJHKSMRT7R75VY6FQGJOUEZN5","networkType":144}},"transactionInfo":{"height":{"lower":0,"higher":0},"hash":"EBDCD709A41BF5100E20A63EA73A536C3704C9B74C9F6D2248509BD7783A829D","merkleComponentHash":"889917138407628DF386D5E6434414A460E6EAA8DD07F7E22FE2B9B653243DAE"},"innerTransactions":[{"type":16724,"networkType":144,"version":3,"deadline":{"value":"2019-03-25T00:22:41.288"},"fee":{"lower":0,"higher":0},"signature":"6B7EFA559701E4C63367C80F5447DFD2978D5838055EF44C2BD3EAB31AE5EEEEFF23FF494FA2464FDA614F8A312F225DB59EC10422F24DA61D225AB91FA5EB08","signer":{"publicKey":"F5B9256485A4BDD4ACD713D8A95BAB38E83B22934E8B8C6A74285B060413FAD6","address":{"address":"SDGQ6RTCBE7S3LTTXG7YVMABXHJTZDCF3JWE5R7A","networkType":144}},"recipient":{"address":"SBFMZE43WQ255UPU7OHRAGZ6S3SFGEK7NZ4AKCBM","networkType":144},"mosaics":[{"id":{"id":{"lower":3294802500,"higher":2243684972}},"amount":{"lower":1000000,"higher":0}}],"message":{"type":0,"payload":""}}],"cosignatures":[{"signature":"311534CF2BC6B1C24E3A6B999C38DE3291B726210E19796D6B5F580E5A23AA99E5978913D727B070EB7709081EDC4B9BF36A86D53AA300956BB343716316D20E","signer":{"publicKey":"7CDFDE511E145E4B17292AC268B2AD493B30C3AB060EBC53F753661C4BC06AC8","address":{"address":"SBV46LBDJZGKETWYS56ZT2VV4RCOMHKA3NTNUQSG","networkType":144}}}]}

[CONFIRMED] SCGUWZ...
{"type":16961,"networkType":144,"version":2,"deadline":{"value":"2019-03-25T00:22:41.288"},"fee":{"lower":0,"higher":0},"signature":"6B7EFA559701E4C63367C80F5447DFD2978D5838055EF44C2BD3EAB31AE5EEEEFF23FF494FA2464FDA614F8A312F225DB59EC10422F24DA61D225AB91FA5EB08","signer":{"publicKey":"64DFE4120D0F960C6602B9386542768556D2CD5242975F37837C8C5F238C78C0","address":{"address":"SCGUWZFCZDKIQCACJHKSMRT7R75VY6FQGJOUEZN5","networkType":144}},"transactionInfo":{"height":{"lower":8713,"higher":0},"hash":"EBDCD709A41BF5100E20A63EA73A536C3704C9B74C9F6D2248509BD7783A829D","merkleComponentHash":"889917138407628DF386D5E6434414A460E6EAA8DD07F7E22FE2B9B653243DAE"},"innerTransactions":[{"type":16724,"networkType":144,"version":3,"deadline":{"value":"2019-03-25T00:22:41.288"},"fee":{"lower":0,"higher":0},"signature":"6B7EFA559701E4C63367C80F5447DFD2978D5838055EF44C2BD3EAB31AE5EEEEFF23FF494FA2464FDA614F8A312F225DB59EC10422F24DA61D225AB91FA5EB08","signer":{"publicKey":"F5B9256485A4BDD4ACD713D8A95BAB38E83B22934E8B8C6A74285B060413FAD6","address":{"address":"SDGQ6RTCBE7S3LTTXG7YVMABXHJTZDCF3JWE5R7A","networkType":144}},"recipient":{"address":"SBFMZE43WQ255UPU7OHRAGZ6S3SFGEK7NZ4AKCBM","networkType":144},"mosaics":[{"id":{"id":{"lower":3294802500,"higher":2243684972}},"amount":{"lower":1000000,"higher":0}}],"message":{"type":0,"payload":""}}],"cosignatures":[{"signature":"311534CF2BC6B1C24E3A6B999C38DE3291B726210E19796D6B5F580E5A23AA99E5978913D727B070EB7709081EDC4B9BF36A86D53AA300956BB343716316D20E","signer":{"publicKey":"7CDFDE511E145E4B17292AC268B2AD493B30C3AB060EBC53F753661C4BC06AC8","address":{"address":"SBV46LBDJZGKETWYS56ZT2VV4RCOMHKA3NTNUQSG","networkType":144}}}]}
```

受信者のアドレスへの転送トランザクションを作り、アグリゲートトランザクションの公開アカウントとしてマルチシグアカウントを渡します。

アグリゲートボンドトランザクションなので`LockFunds`トランザクションを発行します。

`LockFunds`が承認されたらアグリゲートボンドトランザクションを発行します。

アグリゲートボンドトランザクションが承認されたら、別の連署者がそれに署名をすることで2名の署名が揃い、転送トランザクションが承認されます。


### コード解説

```javascript
// マルチシグトランザクションはアグリゲートボンドトランザクションとして行う
const multisigTx = nem.AggregateTransaction.createBonded(
  nem.Deadline.create(),
  [ transferTx.toAggregate(multisig) ],
  nem.NetworkType.MIJIN_TEST
);
const signedMultisigTx = initiater.sign(multisigTx, process.env.GENERATION_HASH);
```

マルチシグトランザクションを発行するにはアグリゲートボンドトランザクションを使います。

```javascript
util.listener(url, initiater.address, {
  onOpen: () => {
    const lockFundsTx = nem.LockFundsTransaction.create(
      nem.Deadline.create(),
      nem.NetworkCurrencyMosaic.createRelative(10),
      nem.UInt64.fromUint(480),
      signedMultisigTx,
      nem.NetworkType.MIJIN_TEST
    );
    const signedLockFundsTx = initiater.sign(lockFundsTx, process.env.GENERATION_HASH);
    util.announce(url, signedLockFundsTx)
  },
  onConfirmed: () => {
    // LockFundが承認されたらアグリゲートトランザクションを発信
    util.announceAggregateBonded(url, signedMultisigTx);
  },
  onAggregateBondedAdded: (aggregateTx) => {
    // 連署者が署名することでマルチシグアカウントからのモザイク送信を承認する
    const cosignatureTx = nem.CosignatureTransaction.create(aggregateTx)
    const signedCosignatureTx = cosignator.signCosignatureTransaction(cosignatureTx)
    util.announceAggregateBondedCosignature(url, signedCosignatureTx)
  }
});
```

本来であれば、連署者は自分に届いた署名待ちのトランザクション一覧を取得し署名をするべきです。

ここでは便宜上、アグリゲートトランザクションが承認されたタイミングで連署者に署名をさせています。

以降はアグリゲートボンドトランザクションのためのLockFundsトランザクションの処理を行っています。


## 1-of-m 構成の場合

`1-of-m`構成(最小承認数が1)である場合、トランザクションを送ろうとする連署者だけの署名で十分なので、アグリゲートコンプリートトランザクションとして発行できます。

`scripts/multisig/convert_account_into_multisig_shared.js`は`1-of-2`のマルチシグアカウントを構築します。

`scripts/multisig/initiate_from_cosigner_without_cosigner.js`はアグリゲートコンプリートで転送するスクリプトです。

この2つを使ってそれぞれの動作を確認してみてください。


## マルチレベルマルチシグの構築

`Catapult`ではマルチシグアカウントを別のマルチシグアカウントの連署者として追加できるようになりました。

これにより、マルチシグ承認を階層化できるようになりました。

- [マルチレベルマルチシグアカウントの作成 \(MLMA\) — NEM Developer Center](https://nemtech.github.io/ja/guides/account/creating-a-multi-level-multisig-account.html)

MLMSを構築する際に特別な方法は必要とせず、単にマルチシグ連署者としてマルチシグアカウントを指定すればよいだけです。


### MLMSの作成

`scripts/multisig/setup_mlms.js`を実行してください。

このスクリプトはアカウントを7つ生成し、そのうち1つをトップのマルチシグアカウントに、

2つを2階層目のアカウントに、最後に2階層目のアカウントに2つづつの連署アカウントを設定したマルチレベルマルチシグを構築します。

```
- Root
 |- Lv2-A
   |- Lv3-a
   `- Lv3-b
 |- Lv2-B
   |- Lv3-c
   `- Lv3-d
```

図にするとこのような状態になります。

```shell
$ node scripts/multisig/setup_mlms.js
Initiater: SCZWFE-CW5HO2-UGNM5K-7LFSVO-DVTADT-722LNL-WSBJ
Endpoint:  http://localhost:3000/account/SCZWFECW5HO2UGNM5K7LFSVODVTADT722LNLWSBJ

Root Multisig Account
Private:  D75B1A1590B1200DE9EBA658DA4A156A2EF77F35A6CFAFF50089B7ED4E838305
Public:   56FA04FFF8B386E291B08A91633C862133DA934E798F3831A0404BA0F2AF64FE
Address:  SCWACH-X75QDD-CXQWDV-NBALPM-UYYSPO-JRVF66-RPX3
Endpoint: http://localhost:3000/account/SCWACHX75QDDCXQWDVNBALPMUYYSPOJRVF66RPX3
Endpoint: http://localhost:3000/account/SCWACHX75QDDCXQWDVNBALPMUYYSPOJRVF66RPX3/multisig
Endpoint: http://localhost:3000/account/SCWACHX75QDDCXQWDVNBALPMUYYSPOJRVF66RPX3/multisig/graph

Left Multisig Account
Private:  2F36E07E71A178D3A9417C6D95F5D880C0C793AB8839D5090B8303A0298C6EC3
Public:   6148C5A73400D65F606B459E841482883CF27B3564EFE0E6CE4B6E93E7D62058
Address:  SA5MHL-UMHRX6-FVQI2V-PWU2JW-GN2YXM-C2M4K2-ZPIV
Endpoint: http://localhost:3000/account/SA5MHLUMHRX6FVQI2VPWU2JWGN2YXMC2M4K2ZPIV
Endpoint: http://localhost:3000/account/SA5MHLUMHRX6FVQI2VPWU2JWGN2YXMC2M4K2ZPIV/multisig
Endpoint: http://localhost:3000/account/SA5MHLUMHRX6FVQI2VPWU2JWGN2YXMC2M4K2ZPIV/multisig/graph

Right Multisig Account
Private:  A582EFCC85CF2477721115F498C2F7F499C42BB6552545AA9B0C16419CDEF17F
Public:   01EAD78A9A0C9A7FA6E14084B61923727BEE9384ADE6650B84FF6EE343AFF6F1
Address:  SD4AKS-SJU7RU-GIC2N5-SMW6HY-O5R5PG-JCMPHG-4U6B
Endpoint: http://localhost:3000/account/SD4AKSSJU7RUGIC2N5SMW6HYO5R5PGJCMPHG4U6B
Endpoint: http://localhost:3000/account/SD4AKSSJU7RUGIC2N5SMW6HYO5R5PGJCMPHG4U6B/multisig
Endpoint: http://localhost:3000/account/SD4AKSSJU7RUGIC2N5SMW6HYO5R5PGJCMPHG4U6B/multisig/graph

Left Cosigner Account1:
Private:  8CA497B41F9B2BA779C3E83C9ACD82FCE4919112941899FA9EB5A95CEB558B10
Public:   5CD2A02C00ABAE17A9BE3C454604E50A15217AFC0E689DCB31C2CE4A68D37EFD
Address:  SDKLY4-SGMNRY-LNNVYN-BPEK3F-QBSYN3-QQHPPU-EKRV
Endpoint: http://localhost:3000/account/SDKLY4SGMNRYLNNVYNBPEK3FQBSYN3QQHPPUEKRV
Endpoint: http://localhost:3000/account/SDKLY4SGMNRYLNNVYNBPEK3FQBSYN3QQHPPUEKRV/multisig
Endpoint: http://localhost:3000/account/SDKLY4SGMNRYLNNVYNBPEK3FQBSYN3QQHPPUEKRV/multisig/graph

Left Cosigner Account2:
Private:  022BAAD0C642F762E836318FB194170F92487759A51AAC38E06B76A1F59B43BA
Public:   55A53A71A5F1A2968DF470D9AC596891E32F806917D382575FB2CE19A5A4B097
Address:  SDJP2Y-VVLDPL-ERW7DK-5UUKPF-R4HBS4-G5CAFI-C3F2
Endpoint: http://localhost:3000/account/SDJP2YVVLDPLERW7DK5UUKPFR4HBS4G5CAFIC3F2
Endpoint: http://localhost:3000/account/SDJP2YVVLDPLERW7DK5UUKPFR4HBS4G5CAFIC3F2/multisig
Endpoint: http://localhost:3000/account/SDJP2YVVLDPLERW7DK5UUKPFR4HBS4G5CAFIC3F2/multisig/graph

Right Cosigner Account1:
Private:  64799713AC8B1AD8F2C6D5BA6D506A2F49F5AAF66757218ABE6F5555926B0D3E
Public:   5B6F5C4FB9587B364C7429372B68692FFBCA9E3CB2FC72D9642A4D21566745F0
Address:  SCNC6D-LW7FJE-TWS6UB-R5YNGI-2ZHZCL-7X6GYG-5NXR
Endpoint: http://localhost:3000/account/SCNC6DLW7FJETWS6UBR5YNGI2ZHZCL7X6GYG5NXR
Endpoint: http://localhost:3000/account/SCNC6DLW7FJETWS6UBR5YNGI2ZHZCL7X6GYG5NXR/multisig
Endpoint: http://localhost:3000/account/SCNC6DLW7FJETWS6UBR5YNGI2ZHZCL7X6GYG5NXR/multisig/graph

Right Cosigner Account2:
Private:  D86821EB3B59262ADEB5F464ECEE63A9316DCCC85BBE672C791B223988D12E30
Public:   6C423C282041404D16EB3B8AFBCD789D8DAC2218D18682AF11C685547CE49C80
Address:  SA5EEM-QNHVTP-5VF5M3-WSYZJV-5JGMZ6-BMAP3C-KTDR
Endpoint: http://localhost:3000/account/SA5EEMQNHVTP5VF5M3WSYZJV5JGMZ6BMAP3CKTDR
Endpoint: http://localhost:3000/account/SA5EEMQNHVTP5VF5M3WSYZJV5JGMZ6BMAP3CKTDR/multisig
Endpoint: http://localhost:3000/account/SA5EEMQNHVTP5VF5M3WSYZJV5JGMZ6BMAP3CKTDR/multisig/graph

connection open
[Transaction announced]
Endpoint: http://localhost:3000/transaction/E283EAB4658DD8F969E7D6EA2DB7876ACF8EC96B1FC5711CCFFBF6FD7FAB548C
Hash:     E283EAB4658DD8F969E7D6EA2DB7876ACF8EC96B1FC5711CCFFBF6FD7FAB548C
Signer:   56FA04FFF8B386E291B08A91633C862133DA934E798F3831A0404BA0F2AF64FE

[UNCONFIRMED] SCWACH...
{"transaction":{"type":16705,"networkType":144,"version":36866,"maxFee":[0,0],"deadline":[2876515307,23],"signature":"05920ED4C2B6F53896E9D23D72D515F92F00B4E7C81E3D20FDC84EDC328BF197D1E639EB2E67131527EE3E52DC5DED6DAC4806743B3DE69A7D882CB53C8CEE0D","signer":"56FA04FFF8B386E291B08A91633C862133DA934E798F3831A0404BA0F2AF64FE","transactions":[{"transaction":{"type":16725,"networkType":144,"version":36867,"maxFee":[0,0],"deadline":[2876515307,23],"signature":"05920ED4C2B6F53896E9D23D72D515F92F00B4E7C81E3D20FDC84EDC328BF197D1E639EB2E67131527EE3E52DC5DED6DAC4806743B3DE69A7D882CB53C8CEE0D","signer":"6148C5A73400D65F606B459E841482883CF27B3564EFE0E6CE4B6E93E7D62058","minApprovalDelta":1,"minRemovalDelta":2,"modifications":[{"cosignatoryPublicKey":"5CD2A02C00ABAE17A9BE3C454604E50A15217AFC0E689DCB31C2CE4A68D37EFD","type":0},{"cosignatoryPublicKey":"55A53A71A5F1A2968DF470D9AC596891E32F806917D382575FB2CE19A5A4B097","type":0}]}},{"transaction":{"type":16725,"networkType":144,"version":36867,"maxFee":[0,0],"deadline":[2876515307,23],"signature":"05920ED4C2B6F53896E9D23D72D515F92F00B4E7C81E3D20FDC84EDC328BF197D1E639EB2E67131527EE3E52DC5DED6DAC4806743B3DE69A7D882CB53C8CEE0D","signer":"01EAD78A9A0C9A7FA6E14084B61923727BEE9384ADE6650B84FF6EE343AFF6F1","minApprovalDelta":2,"minRemovalDelta":2,"modifications":[{"cosignatoryPublicKey":"5B6F5C4FB9587B364C7429372B68692FFBCA9E3CB2FC72D9642A4D21566745F0","type":0},{"cosignatoryPublicKey":"6C423C282041404D16EB3B8AFBCD789D8DAC2218D18682AF11C685547CE49C80","type":0}]}},{"transaction":{"type":16725,"networkType":144,"version":36867,"maxFee":[0,0],"deadline":[2876515307,23],"signature":"05920ED4C2B6F53896E9D23D72D515F92F00B4E7C81E3D20FDC84EDC328BF197D1E639EB2E67131527EE3E52DC5DED6DAC4806743B3DE69A7D882CB53C8CEE0D","signer":"56FA04FFF8B386E291B08A91633C862133DA934E798F3831A0404BA0F2AF64FE","minApprovalDelta":2,"minRemovalDelta":2,"modifications":[{"cosignatoryPublicKey":"6148C5A73400D65F606B459E841482883CF27B3564EFE0E6CE4B6E93E7D62058","type":0},{"cosignatoryPublicKey":"01EAD78A9A0C9A7FA6E14084B61923727BEE9384ADE6650B84FF6EE343AFF6F1","type":0}]}}],"cosignatures":[{"signature":"A250894C6299FE3BEA74B51279E17CA1C22BD2877A2CA4A65EB5DD5735719AA3326D225B2EA613A62AAD18D4E3C5F61C33CB8463E9B15D66C8A60A93713EEC0E","signer":{"publicKey":"6148C5A73400D65F606B459E841482883CF27B3564EFE0E6CE4B6E93E7D62058","address":{"address":"SA5MHLUMHRX6FVQI2VPWU2JWGN2YXMC2M4K2ZPIV","networkType":144}}},{"signature":"53B7B1438C7284CE66C4820F41359DC0D84142B244A4244FE703B0061E76FF61F3C435CA5F051A179B5E40776855FF028630B4AF8976693FB10D3AF63104100D","signer":{"publicKey":"5CD2A02C00ABAE17A9BE3C454604E50A15217AFC0E689DCB31C2CE4A68D37EFD","address":{"address":"SDKLY4SGMNRYLNNVYNBPEK3FQBSYN3QQHPPUEKRV","networkType":144}}},{"signature":"44BFCACA9C18C8D3C17E5F7448BD31473BA46BECD3225DBB3573C3DDDEF7BB8D60403A407CDD478AD1E12EC8003AE401972F28DD1EC50C5CB67C26BDB571950C","signer":{"publicKey":"55A53A71A5F1A2968DF470D9AC596891E32F806917D382575FB2CE19A5A4B097","address":{"address":"SDJP2YVVLDPLERW7DK5UUKPFR4HBS4G5CAFIC3F2","networkType":144}}},{"signature":"1460746724811EF4DFEA038188EDB37357247F688C47EF78966C2E4D8633B8AA1678ECC644A446755D10B01018269E63519222508D29C46E88A22CA9C93F8B0C","signer":{"publicKey":"01EAD78A9A0C9A7FA6E14084B61923727BEE9384ADE6650B84FF6EE343AFF6F1","address":{"address":"SD4AKSSJU7RUGIC2N5SMW6HYO5R5PGJCMPHG4U6B","networkType":144}}},{"signature":"08577EE4063F2744F4173A8129696AF5EDA1672AED24ABE80F51970739A95DC23EB1FA4EC02E9CB900ED0B5E211563970EA741D686C31AB81BA5FC4037A1A80D","signer":{"publicKey":"5B6F5C4FB9587B364C7429372B68692FFBCA9E3CB2FC72D9642A4D21566745F0","address":{"address":"SCNC6DLW7FJETWS6UBR5YNGI2ZHZCL7X6GYG5NXR","networkType":144}}},{"signature":"F991BCA7B3C0738EE04C28233D371E58128F5351249042472DF3413C5888D45CD4AB3ADD9B9B18D9217F407A2008B13AD18817B397E0ECFFE7424914B6B3D100","signer":{"publicKey":"6C423C282041404D16EB3B8AFBCD789D8DAC2218D18682AF11C685547CE49C80","address":{"address":"SA5EEMQNHVTP5VF5M3WSYZJV5JGMZ6BMAP3CKTDR","networkType":144}}}]}}

[CONFIRMED] SCWACH...
{"transaction":{"type":16705,"networkType":144,"version":36866,"maxFee":[0,0],"deadline":[2876515307,23],"signature":"05920ED4C2B6F53896E9D23D72D515F92F00B4E7C81E3D20FDC84EDC328BF197D1E639EB2E67131527EE3E52DC5DED6DAC4806743B3DE69A7D882CB53C8CEE0D","signer":"56FA04FFF8B386E291B08A91633C862133DA934E798F3831A0404BA0F2AF64FE","transactions":[{"transaction":{"type":16725,"networkType":144,"version":36867,"maxFee":[0,0],"deadline":[2876515307,23],"signature":"05920ED4C2B6F53896E9D23D72D515F92F00B4E7C81E3D20FDC84EDC328BF197D1E639EB2E67131527EE3E52DC5DED6DAC4806743B3DE69A7D882CB53C8CEE0D","signer":"6148C5A73400D65F606B459E841482883CF27B3564EFE0E6CE4B6E93E7D62058","minApprovalDelta":1,"minRemovalDelta":2,"modifications":[{"cosignatoryPublicKey":"5CD2A02C00ABAE17A9BE3C454604E50A15217AFC0E689DCB31C2CE4A68D37EFD","type":0},{"cosignatoryPublicKey":"55A53A71A5F1A2968DF470D9AC596891E32F806917D382575FB2CE19A5A4B097","type":0}]}},{"transaction":{"type":16725,"networkType":144,"version":36867,"maxFee":[0,0],"deadline":[2876515307,23],"signature":"05920ED4C2B6F53896E9D23D72D515F92F00B4E7C81E3D20FDC84EDC328BF197D1E639EB2E67131527EE3E52DC5DED6DAC4806743B3DE69A7D882CB53C8CEE0D","signer":"01EAD78A9A0C9A7FA6E14084B61923727BEE9384ADE6650B84FF6EE343AFF6F1","minApprovalDelta":2,"minRemovalDelta":2,"modifications":[{"cosignatoryPublicKey":"5B6F5C4FB9587B364C7429372B68692FFBCA9E3CB2FC72D9642A4D21566745F0","type":0},{"cosignatoryPublicKey":"6C423C282041404D16EB3B8AFBCD789D8DAC2218D18682AF11C685547CE49C80","type":0}]}},{"transaction":{"type":16725,"networkType":144,"version":36867,"maxFee":[0,0],"deadline":[2876515307,23],"signature":"05920ED4C2B6F53896E9D23D72D515F92F00B4E7C81E3D20FDC84EDC328BF197D1E639EB2E67131527EE3E52DC5DED6DAC4806743B3DE69A7D882CB53C8CEE0D","signer":"56FA04FFF8B386E291B08A91633C862133DA934E798F3831A0404BA0F2AF64FE","minApprovalDelta":2,"minRemovalDelta":2,"modifications":[{"cosignatoryPublicKey":"6148C5A73400D65F606B459E841482883CF27B3564EFE0E6CE4B6E93E7D62058","type":0},{"cosignatoryPublicKey":"01EAD78A9A0C9A7FA6E14084B61923727BEE9384ADE6650B84FF6EE343AFF6F1","type":0}]}}],"cosignatures":[{"signature":"A250894C6299FE3BEA74B51279E17CA1C22BD2877A2CA4A65EB5DD5735719AA3326D225B2EA613A62AAD18D4E3C5F61C33CB8463E9B15D66C8A60A93713EEC0E","signer":{"publicKey":"6148C5A73400D65F606B459E841482883CF27B3564EFE0E6CE4B6E93E7D62058","address":{"address":"SA5MHLUMHRX6FVQI2VPWU2JWGN2YXMC2M4K2ZPIV","networkType":144}}},{"signature":"53B7B1438C7284CE66C4820F41359DC0D84142B244A4244FE703B0061E76FF61F3C435CA5F051A179B5E40776855FF028630B4AF8976693FB10D3AF63104100D","signer":{"publicKey":"5CD2A02C00ABAE17A9BE3C454604E50A15217AFC0E689DCB31C2CE4A68D37EFD","address":{"address":"SDKLY4SGMNRYLNNVYNBPEK3FQBSYN3QQHPPUEKRV","networkType":144}}},{"signature":"44BFCACA9C18C8D3C17E5F7448BD31473BA46BECD3225DBB3573C3DDDEF7BB8D60403A407CDD478AD1E12EC8003AE401972F28DD1EC50C5CB67C26BDB571950C","signer":{"publicKey":"55A53A71A5F1A2968DF470D9AC596891E32F806917D382575FB2CE19A5A4B097","address":{"address":"SDJP2YVVLDPLERW7DK5UUKPFR4HBS4G5CAFIC3F2","networkType":144}}},{"signature":"1460746724811EF4DFEA038188EDB37357247F688C47EF78966C2E4D8633B8AA1678ECC644A446755D10B01018269E63519222508D29C46E88A22CA9C93F8B0C","signer":{"publicKey":"01EAD78A9A0C9A7FA6E14084B61923727BEE9384ADE6650B84FF6EE343AFF6F1","address":{"address":"SD4AKSSJU7RUGIC2N5SMW6HYO5R5PGJCMPHG4U6B","networkType":144}}},{"signature":"08577EE4063F2744F4173A8129696AF5EDA1672AED24ABE80F51970739A95DC23EB1FA4EC02E9CB900ED0B5E211563970EA741D686C31AB81BA5FC4037A1A80D","signer":{"publicKey":"5B6F5C4FB9587B364C7429372B68692FFBCA9E3CB2FC72D9642A4D21566745F0","address":{"address":"SCNC6DLW7FJETWS6UBR5YNGI2ZHZCL7X6GYG5NXR","networkType":144}}},{"signature":"F991BCA7B3C0738EE04C28233D371E58128F5351249042472DF3413C5888D45CD4AB3ADD9B9B18D9217F407A2008B13AD18817B397E0ECFFE7424914B6B3D100","signer":{"publicKey":"6C423C282041404D16EB3B8AFBCD789D8DAC2218D18682AF11C685547CE49C80","address":{"address":"SA5EEMQNHVTP5VF5M3WSYZJV5JGMZ6BMAP3CKTDR","networkType":144}}}]}}
```

トランザクションが承認されたらURLにアクセスしてみましょう。


#### コード解説

マルチシグアカウントに別のマルチシグアカウントを連署者を追加することで構築することができます。

このコードでも、便宜上コード内でアカウントを生成していて、署名も済ませてしまっていますが、現実には`AggregateTransaction.createBonded`を用いて、署名要求を送る方法を使います。

マルチシグレベルマルチシグの階層構造は`/account/{address}/multisig/graph`のAPIにアクセスすることで取得できます。

```json
[
  {
    level:0,
    multisigEntries:[
      {
        multisig:{
          account:"56FA04FFF8B386E291B08A91633C862133DA934E798F3831A0404BA0F2AF64FE",
          accountAddress:"90AC011EFFEC06315E161D5A102DECA63127B931A97DE8BEFB",
          minApproval:2,
          minRemoval:2,
          cosignatories:[
            "01EAD78A9A0C9A7FA6E14084B61923727BEE9384ADE6650B84FF6EE343AFF6F1",
            "6148C5A73400D65F606B459E841482883CF27B3564EFE0E6CE4B6E93E7D62058"
          ],
          multisigAccounts:[
          ]
        }
      }
    ]
  },
  {
    level:1,
    multisigEntries:[
      {
        multisig:{
          account:"6148C5A73400D65F606B459E841482883CF27B3564EFE0E6CE4B6E93E7D62058",
          accountAddress:"903AC3AE8C3C6FE2D608D55F6A693633758BB05A6715ACBD15",
          minApproval:1,
          minRemoval:2,
          cosignatories:[
            "55A53A71A5F1A2968DF470D9AC596891E32F806917D382575FB2CE19A5A4B097",
            "5CD2A02C00ABAE17A9BE3C454604E50A15217AFC0E689DCB31C2CE4A68D37EFD"
          ],
          multisigAccounts:[
            "56FA04FFF8B386E291B08A91633C862133DA934E798F3831A0404BA0F2AF64FE"
          ]
        }
      },
      {
        multisig:{
          account:"01EAD78A9A0C9A7FA6E14084B61923727BEE9384ADE6650B84FF6EE343AFF6F1",
          accountAddress:"90F8054A49A7E343205A6F64CB78F87763D7992263CE6E53C1",
          minApproval:2,
          minRemoval:2,
          cosignatories:[
            "5B6F5C4FB9587B364C7429372B68692FFBCA9E3CB2FC72D9642A4D21566745F0",
            "6C423C282041404D16EB3B8AFBCD789D8DAC2218D18682AF11C685547CE49C80"
          ],
          multisigAccounts:[
            "56FA04FFF8B386E291B08A91633C862133DA934E798F3831A0404BA0F2AF64FE"
          ]
        }
      }
    ]
  },
  {
    level:2,
    multisigEntries:[
      {
        multisig:{
          account:"5B6F5C4FB9587B364C7429372B68692FFBCA9E3CB2FC72D9642A4D21566745F0",
          accountAddress:"909A2F0D76F95249DA5EA063DC34C8D64F912FF7F1B06EB6F1",
          minApproval:0,
          minRemoval:0,
          cosignatories:[

          ],
          multisigAccounts:[
            "01EAD78A9A0C9A7FA6E14084B61923727BEE9384ADE6650B84FF6EE343AFF6F1"
          ]
        }
      },
      {
        multisig:{
          account:"55A53A71A5F1A2968DF470D9AC596891E32F806917D382575FB2CE19A5A4B097",
          accountAddress:"90D2FD62B558DEB246DF1ABB4A29E58F0E1970DD100A816CBA",
          minApproval:0,
          minRemoval:0,
          cosignatories:[

          ],
          multisigAccounts:[
            "6148C5A73400D65F606B459E841482883CF27B3564EFE0E6CE4B6E93E7D62058"
          ]
        }
      },
      {
        multisig:{
          account:"5CD2A02C00ABAE17A9BE3C454604E50A15217AFC0E689DCB31C2CE4A68D37EFD",
          accountAddress:"90D4BC7246636385B5B5C342F22B65806586EE103BDF422A35",
          minApproval:0,
          minRemoval:0,
          cosignatories:[

          ],
          multisigAccounts:[
            "6148C5A73400D65F606B459E841482883CF27B3564EFE0E6CE4B6E93E7D62058"
          ]
        }
      },
      {
        multisig:{
          account:"6C423C282041404D16EB3B8AFBCD789D8DAC2218D18682AF11C685547CE49C80",
          accountAddress:"903A42320D3D66FED4BD66ED2C6535EA4CCCF82C03F6254C71",
          minApproval:0,
          minRemoval:0,
          cosignatories:[

          ],
          multisigAccounts:[
            "01EAD78A9A0C9A7FA6E14084B61923727BEE9384ADE6650B84FF6EE343AFF6F1"
          ]
        }
      }
    ]
  }
]
```

各レベルごとの構造でマルチシグの情報が表示されます。
